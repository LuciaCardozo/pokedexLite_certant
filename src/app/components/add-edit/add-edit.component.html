<div class="contenedor">
    <button class="btn btn-danger btnSalir btnActive" (click)="onLogout()">Salir</button>
    <div>
        <p class="text-center mb-5"><small>User logged in system</small></p>
        <div class="card m-3">
            <div class="card-header text-center">
                Pokedex-Lite
            </div>
            <div class="card-body">
                <!-- Para Modificar -->
                <div *ngIf="existePokemon">
                    <div class="inputItems flexDirectionColumn">
                        <h5>Tipo</h5>
                        <div class="input-group mb-2 d-flex justify-content-center">
                            <input type="text" style="width: 30%;" [(ngModel)]="tipoSeleccionado">
                            <div class="input-group-append" >
                                <button class="btn btn-outline-danger" type="button" (click)="addType(pokemon,tipoSeleccionado)">Agregar</button>
                            </div>
                        </div>
                        <label >Seleccione el tipo a editar:</label>
                        <ul class="ulSeleccion">
                            <li (click)="tipoSeleccionado=type" *ngFor="let type of pokemon.type">{{type}}
                                <button class="btn btn-outline-danger" (click)="eliminarTipo=true" type="button">üóëÔ∏è</button>
                            </li>
                        </ul>
                    </div>
                    <div class="inputContainer">
                        <label>Nombre</label>
                        <input type="text" style="width: 60%;" placeholder="{{pokemon?pokemon.name:'Name'}}" [(ngModel)]="nombreAEditar">
                        <label>Lvl</label>
                        <input type="number" style="width:15%;" placeholder="{{pokemon.lvl}}" disabled>
                    </div>
                    <div class="custom-input-file">
                        <input type="file" accept=".png,.jpg" id="inputImg" class="input-file" (change)="cargarImagen($event)">
                        <label class="labelInputImg" disabled><img src={{pokemon.image}} width="100px" height="100px" alt=""></label>
                    </div>
                    <div class="inputItems flexDirectionColumn">  
                        <h5 class="mt-2">Habilidades</h5>
                            <div *ngFor="let ability of pokemon.abilities">
                                <label>Nombre: {{ability.name}}</label>
                                <br>
                                <label>Descripcion: {{ability.description}}</label>
                            </div>
                    </div>
                    <div *ngIf="pokemon.evolutionId" class="inputItems flexDirectionColumn" >
                        <h5>Evoluciones</h5>
                        <label>{{pokemonEvolucion.name}}</label>
                        <label>Level: {{pokemonEvolucion.lvl}}</label>
                        <input type="file" accept=".png,.jpg" id="inputImg" class="input-file">
                        <label>
                            <img src={{pokemonEvolucion.image}} width="100px" height="100px" alt="">
                         </label>
                     </div>
                     <div class="d-flex justify-content-center mt-2 ">
                        <button class="btn btn-danger w-50 btnActive" (click)="volverAlMenu()">Volver</button>
                        <button class="btn btn-primary w-50 btnActive" (click)="modificar(pokemon)">Update</button>
                    </div> 
                </div>
                <!-- Para alta -->
                <form [formGroup]="formulario" (ngSubmit)="altaPokemon()" *ngIf="!existePokemon">
                    <div class="inputItems flexDirectionColumn"> 
                        <h5>Tipo</h5>
                        <app-input [condicion]="formulario.get('types')?.hasError('required') && formulario.get('types')?.touched"
                        [formControlName]="'types'" [mensaje]="'El tipo es requerido'" 
                        [tipoInput]="'text'" [formulario]="formulario"></app-input>
                    </div>
                    <div class="inputContainer">
                        <label>Nombre</label>
                        <app-input [condicion]="formulario.get('name')?.hasError('required') && formulario.get('name')?.touched"
                            [formControlName]="'name'" [mensaje]="'El nombre es requerido'" 
                            [tipoInput]="'text'" [formulario]="formulario"></app-input>
                        <label>Lvl</label>
                        <app-input [condicion]="formulario.get('lvl')?.hasError('required') && formulario.get('lvl')?.touched"
                            [formControlName]="'lvl'" [mensaje]="'El lvl es requerido'" 
                            [tipoInput]="'number'" [formulario]="formulario"></app-input>
                    </div>
                    <div class="custom-input-file">
                        <input type="file" accept=".png,.jpg" id="inputImg" class="input-file" (change)="cargarImagen($event)">
                        <label class="labelInputImg" for="inputImg">Subir Imagen</label>
                    </div>
                    <div class="inputItems flexDirectionColumn">  
                        <h5 class="mt-2">Habilidades</h5>
                        <app-input [condicion]="formulario.get('abilityName')?.hasError('required') && formulario.get('abilityName')?.touched"
                            [formControlName]="'abilityName'" [nombreLabel]="'Nombre:'" [tipoInput]="'text'"
                            [mensaje]="'El nombre es requerido'" [formulario]="formulario"></app-input>
                        <app-input [condicion]="formulario.get('abilityDescription')?.hasError('required') && formulario.get('abilityDescription')?.touched"
                            [formControlName]="'abilityDescription'" [nombreLabel]="'Descripcion:'" [tipoInput]="'text'"
                            [mensaje]="'La descripcion es requerida'" [formulario]="formulario"></app-input>
                    </div>
                    <div class="d-flex justify-content-center mt-2 ">
                        <button class="btn btn-danger w-50 btnActive" (click)="volverAlMenu()">Volver</button>
                        <button class="btn btn-primary w-50 btnActive" type="submit" [disabled]="formulario.invalid">Save</button>
                    </div> 
                </form>
            </div>
        </div>
    </div>
</div>
<div class="popup" style="top:0; left:0;" *ngIf="eliminarTipo">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Pokedex-Lite</h5>
        </div>
        <div class="modal-body">
            <p style="font-weight: bolder; font-size: 15px;">Queres eliminar este tipo?</p>
        </div>
        <div class="text-center">
            <button type="button" class="btn btn-success m-1" value="si" (click)="deleteType(pokemon,tipoSeleccionado)">Si</button>
            <button type="button" class="btn btn-secondary m-1" value="no" (click)="cerrarPop()">No</button>
        </div>
        </div>
    </div>
</div>